<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SWDSMS | Student Dashboard</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

<style>
/* Same styling as before for sidebar, main, stats, table... */
*{box-sizing:border-box;font-family:'Poppins',sans-serif;transition:0.3s;}
body{margin:0;display:flex;background:#f4f5fb;}

/* Sidebar */
#sidebar{
  width:250px;
  background:#fff;
  height:100vh;
  padding:25px 20px;
  box-shadow:2px 0 15px rgba(0,0,0,.05);
  display:flex; flex-direction:column;
}
#sidebar h2{color:#6366F1;margin-bottom:40px;font-size:24px;font-weight:600;text-align:center;}
#sidebar a{display:flex;align-items:center;gap:10px;padding:12px 15px;color:#374151;text-decoration:none;border-radius:10px;margin-bottom:12px;font-size:15px;}
#sidebar a i{min-width:20px;text-align:center;}
#sidebar a.active,#sidebar a:hover{background:#6366F1;color:white;}

/* Main */
.main{flex:1;padding:30px 40px;overflow-x:hidden;}
.stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:35px;}
.stat{background:white;padding:25px 20px;border-radius:18px;box-shadow:0 10px 20px rgba(0,0,0,.08);text-align:center;}
.stat p{margin:0;font-weight:500;color:#4b5563;}
.stat span{display:block;font-size:32px;font-weight:600;color:#6366F1;margin-top:10px;}
.table-card{background:white;padding:25px 30px;border-radius:20px;box-shadow:0 10px 25px rgba(0,0,0,.08);margin-bottom:30px;}
.table-card h3{margin-top:0;margin-bottom:15px;color:#111827;}
.table-card input{padding:12px 15px;border-radius:12px;border:1px solid #ddd;margin-bottom:20px;width:100%;max-width:300px;}
table{width:100%;border-collapse:collapse;}
th,td{padding:12px 15px;border-bottom:1px solid #e5e7eb;font-size:14px;text-align:left;}
th{background:#f9fafb;font-weight:600;color:#4b5563;}
tr:hover{background:#f3f4f6;}
</style>
</head>
<body>

<div id="sidebar"></div>

<div class="main">
  <h1>Student Dashboard</h1>

  <!-- Stats -->
  <div class="stats">
    <div class="stat"><p>Total Reports</p><span id="total">0</span></div>
    <div class="stat"><p>Pending</p><span id="pending">0</span></div>
    <div class="stat"><p>Resolved</p><span id="resolved">0</span></div>
  </div>

  <!-- Incident Table -->
  <div class="table-card">
    <h3>My Incident Reports</h3>
    <input type="text" placeholder="Search..." onkeyup="searchIncident(this.value)">
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
          <th>Date</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody id="incidentTable"></tbody>
    </table>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/js/all.min.js"></script>
<script>
// Sidebar
let userRole = "student";
const sidebarItems = {
  student:[
    {name:"Dashboard", icon:"fa-tachometer-alt", link:"student dashboard.html", active:true},
    {name:"Submit Report", icon:"fa-file-alt", link:"submit report.html"},
    {name:"Logout", icon:"fa-sign-out-alt", action:"logout"}
  ]
};

function renderSidebar(role){
  const sidebar = document.getElementById("sidebar");
  sidebar.innerHTML = `<h2>SWDSMS</h2>`;
  sidebarItems[role].forEach(item=>{
    const a = document.createElement("a");
    a.href = item.link ? item.link : "#";
    a.innerHTML = `<i class="fas ${item.icon}"></i> ${item.name}`;
    if(item.active) a.classList.add("active");
    if(item.action==="logout") a.onclick = logout;
    sidebar.appendChild(a);
  });
}
renderSidebar(userRole);

// Example data
let incidents = [
  {type:"Bullying", description:"Someone pushed me.", date:"2026-02-09", status:"Pending"},
  {type:"Digital Misuse", description:"Classmate shared my password.", date:"2026-02-07", status:"Resolved"}
];

// Render incidents
function renderIncidents(data){
  const tbody = document.getElementById("incidentTable");
  tbody.innerHTML = "";
  let total = data.length;
  let pending = data.filter(i=>i.status==="Pending").length;
  let resolved = data.filter(i=>i.status==="Resolved").length;

  document.getElementById("total").innerText = total;
  document.getElementById("pending").innerText = pending;
  document.getElementById("resolved").innerText = resolved;

  data.forEach(i=>{
    let tr = document.createElement("tr");
    tr.innerHTML = `<td>${i.type}</td><td>${i.description}</td><td>${i.date}</td><td>${i.status}</td>`;
    tbody.appendChild(tr);
  });
}
renderIncidents(incidents);

function searchIncident(val){
  val = val.toLowerCase();
  let filtered = incidents.filter(i=>i.type.toLowerCase().includes(val) || i.description.toLowerCase().includes(val));
  renderIncidents(filtered);
}

function logout(){
  alert("Logging out...");
  window.location.href="login.html"; // replace with your login page
}
</script>

</body>
</html>
